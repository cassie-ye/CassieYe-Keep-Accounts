{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7d3191e2\"],{1:function(e,t){},2:function(e,t){},2403:function(e,t,a){},3:function(e,t){},\"37fb\":function(e,t,a){\"use strict\";a(\"d293\")},\"38b1\":function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-form\",{staticClass:\"demo-form-inline\",attrs:{inline:!0,model:e.formData.formInline}},[a(\"el-form-item\",{staticClass:\"el-form-item\",attrs:{label:\"摊位号：\"}},[a(\"el-input\",{attrs:{placeholder:\"输入搜索关键词\"},model:{value:e.formData.formInline.stallNo,callback:function(t){e.$set(e.formData.formInline,\"stallNo\",t)},expression:\"formData.formInline.stallNo\"}})],1),a(\"el-form-item\",{staticClass:\"el-form-item\",attrs:{label:\"采购商手机号：\"}},[a(\"el-input\",{attrs:{placeholder:\"输入搜索关键词\"},model:{value:e.formData.formInline.purchaserPhoneNumber,callback:function(t){e.$set(e.formData.formInline,\"purchaserPhoneNumber\",t)},expression:\"formData.formInline.purchaserPhoneNumber\"}})],1),a(\"el-form-item\",{staticClass:\"el-form-item\",attrs:{label:\"商户名称：\"}},[a(\"el-input\",{attrs:{placeholder:\"输入搜索关键词\"},model:{value:e.formData.formInline.businessName,callback:function(t){e.$set(e.formData.formInline,\"businessName\",t)},expression:\"formData.formInline.businessName\"}})],1),a(\"el-form-item\",{staticClass:\"el-form-item\",attrs:{label:\"商品名称：\"}},[a(\"el-input\",{attrs:{placeholder:\"输入搜索关键词\"},model:{value:e.formData.formInline.goodsName,callback:function(t){e.$set(e.formData.formInline,\"goodsName\",t)},expression:\"formData.formInline.goodsName\"}})],1),a(\"el-form-item\",{staticClass:\"el-form-item\",attrs:{label:\"采购时间：\"}},[a(\"el-date-picker\",{staticStyle:{\"margin-top\":\"6px\"},attrs:{format:\"yyyy-MM-dd\",type:\"daterange\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:e.formData.formInline.purchaseTime,callback:function(t){e.$set(e.formData.formInline,\"purchaseTime\",t)},expression:\"formData.formInline.purchaseTime\"}})],1),a(\"el-form-item\",{staticClass:\"button-group\"},[a(\"el-button\",{staticClass:\"search-btn\",attrs:{type:\"primary\"},on:{click:e.onSearch}},[e._v(\"搜索\")]),a(\"el-button\",{staticClass:\"reset-btn\",attrs:{type:\"primary\"},on:{click:e.onReset}},[e._v(\"重置\")]),a(\"el-button\",{staticClass:\"export-btn\",attrs:{type:\"primary\"},on:{click:e.onExport}},[e._v(\"导出\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"15px\"},attrs:{data:e.recordsList,border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{label:\"采购时间\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",{staticStyle:{\"font-size\":\"15px\",color:\"#999999\"}},[e._v(e._s(t.row.dealTime||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"采购商手机号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.buyerMobileNo||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"摊位号\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.boothNo||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"商户名称\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.proprietorName||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"商品名称\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.goodsName||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"采购量\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.goodsWeight+t.row.unit||\"暂无\"))])]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(a){return e.openOperateDialog(t.row)}}},[e._v(\"食安链条\")])]}}])})],1),e.infoVisible?a(\"foodSafetyChain\",{ref:\"info\"}):e._e(),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"current-page\":e.formData.page,\"page-sizes\":[10,20,50,100],\"page-size\":e.formData.limit,total:e.total,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":e.sizeChangeHandle,\"current-change\":e.currentChangeHandle}})],1)},o=[],n=a(\"3835\"),s=(a(\"d81d\"),a(\"c19f\"),a(\"ace4\"),a(\"a9e3\"),a(\"d3b7\"),a(\"5cc6\"),a(\"9a8c\"),a(\"a975\"),a(\"735e\"),a(\"c1ac\"),a(\"d139\"),a(\"3a7b\"),a(\"d5d6\"),a(\"82f8\"),a(\"e91f\"),a(\"60bd\"),a(\"5f96\"),a(\"3280\"),a(\"3fcc\"),a(\"ca91\"),a(\"25a1\"),a(\"cd26\"),a(\"3c5d\"),a(\"2954\"),a(\"649e\"),a(\"219c\"),a(\"170b\"),a(\"b39a\"),a(\"72f7\"),a(\"a573\"),a(\"5a0c\")),r=a.n(s),l=a(\"1146\"),c=a.n(l),m=a(\"21a6\"),f=a.n(m),u=a(\"b775\");function d(e){return Object(u[\"a\"])({url:\"/demo/demobase/goodsDealList\",method:\"GET\",params:e})}function p(e){return Object(u[\"a\"])({url:\"/demo/demobase/queryChain/\".concat(e),method:\"GET\"})}var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{title:\"食安链条\",width:\"35%\",\"close-on-click-modal\":!1,visible:e.visible},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"div\",{staticClass:\"timeline-container\"},[a(\"el-timeline\",[a(\"el-timeline-item\",{attrs:{color:\"#409eff\",timestamp:e.purchaseObj.dealTime||\"暂无\",placement:\"top\"}},[a(\"el-card\",[a(\"div\",{staticClass:\"card-content\"},[a(\"div\",{staticClass:\"card-content-left\"},[a(\"div\",[a(\"i\",{staticClass:\"el-icon-mobile-phone\"})]),a(\"div\",{staticClass:\"card-content-left-text\"},[a(\"div\",{staticClass:\"first\"},[e._v(\"采购商手机号：\"+e._s(e.purchaseObj.buyerMobileNo||\"暂无\"))]),a(\"div\",{staticClass:\"card-content-left-text-time\"},[a(\"i\",{staticClass:\"el-icon-time\"}),a(\"div\",[e._v(e._s(e.purchaseObj.dealTime||\"暂无\"))])])])]),a(\"div\",[e._v(\" 采购 \")])])])],1),e.allocateList.length>0?e._l(e.allocateList,(function(t,i){return a(\"el-timeline-item\",{key:i,attrs:{color:\"#409eff\",timestamp:t.dealTime||\"暂无\",placement:\"top\"}},[a(\"el-card\",[a(\"div\",{staticClass:\"card-content\"},[a(\"div\",{staticClass:\"card-content-left\"},[a(\"div\",[a(\"i\",{staticClass:\"el-icon-mobile-phone\"})]),a(\"div\",{staticClass:\"card-content-left-text\"},[a(\"div\",{staticClass:\"first\"},[e._v(\"摊位号：\"+e._s(t.boothNo||\"暂无\"))]),a(\"div\",[e._v(\"商户名称：\"+e._s(t.proprietorName||\"暂无\"))]),a(\"div\",{staticClass:\"card-content-left-text-time\"},[a(\"i\",{staticClass:\"el-icon-time\"}),a(\"div\",[e._v(e._s(t.dealTime||\"暂无\"))])])])]),a(\"div\",[e._v(\" 配货 \")])])])],1)})):e._e(),a(\"el-timeline-item\",{attrs:{color:\"#409eff\",timestamp:e.enterVenueObj.entranceTime||\"暂无\",placement:\"top\"}},[a(\"el-card\",[a(\"div\",{staticClass:\"card-content\"},[a(\"div\",{staticClass:\"card-content-left\"},[a(\"div\",[a(\"img\",{attrs:{src:\"https://axhub.im/ax9/31c4b1bb79511517/images/%E9%87%87%E8%B4%AD%E8%AE%B0%E5%BD%95_1/u95.svg\",alt:\"SVG Image\"}})]),a(\"div\",{staticClass:\"card-content-left-text\"},[a(\"div\",{staticClass:\"first\"},[e._v(\"摊位号：\"+e._s(e.enterVenueObj.boothName||\"暂无\"))]),a(\"div\",{staticClass:\"first\"},[e._v(\"商户名称：\"+e._s(e.enterVenueObj.proprietorName||\"暂无\"))]),a(\"div\",{staticClass:\"first\"},[e._v(\"产地：\"+e._s(e.enterVenueObj.divisionName||\"暂无\"))]),a(\"div\",{staticClass:\"card-content-left-text-time\"},[a(\"i\",{staticClass:\"el-icon-time\"}),a(\"div\",[e._v(e._s(e.enterVenueObj.entranceTime||\"暂无\"))])])])]),a(\"div\",[e._v(\" 进场 \")])])])],1)],2)],1)])},b=[],v={data:function(){return{visible:!1,goodsDealDetailId:null,timelineData:[],purchaseObj:{},allocateList:[],enterVenueObj:{}}},created:function(){},methods:{init:function(e){this.visible=!0,this.goodsDealDetailId=e,this.getFoodSafetyChainDetails(this.goodsDealDetailId)},getFoodSafetyChainDetails:function(e){var t=this;p(e).then((function(e){t.purchaseObj=e.buy,t.allocateList=e.sell,t.enterVenueObj=e.entrance}))}}},g=v,D=(a(\"37fb\"),a(\"2877\")),_=Object(D[\"a\"])(g,h,b,!1,null,\"199f81b7\",null),N=_.exports,C={name:\"ArticleList\",components:{foodSafetyChain:N},data:function(){return{total:0,listLoading:!0,infoVisible:!1,recordsList:[],formData:{page:1,limit:10,formInline:{stallNo:\"\",purchaserPhoneNumber:\"\",businessName:\"\",goodsName:\"\",purchaseTime:null}}}},created:function(){this.getPurchaseRecordsManagementList()},methods:{getPurchaseRecordsManagementList:function(){var e=this;this.listLoading=!0;var t=\"\",a=\"\";if(this.formData.formInline.purchaseTime&&2===this.formData.formInline.purchaseTime.length){var i=Object(n[\"a\"])(this.formData.formInline.purchaseTime,2),o=i[0],s=i[1];t=r()(o).format(\"YYYY-MM-DD\"),a=r()(s).format(\"YYYY-MM-DD\")}var l={limit:this.formData.limit,page:this.formData.page,boothNo:this.formData.formInline.stallNo,buyerMobileNo:this.formData.formInline.purchaserPhoneNumber,dealTimeStart:t,dealTimeEnd:a,goodsName:this.formData.formInline.goodsName,proprietorName:this.formData.formInline.businessName};d(l).then((function(t){e.recordsList=t.data,e.total=Number(t.count),e.listLoading=!1}))},openOperateDialog:function(e){var t=this;this.infoVisible=!0,this.$nextTick((function(){t.$refs.info.init(e.goodsDealDetailId)}))},sizeChangeHandle:function(e){this.formData.limit=e,this.formData.page=1,this.getPurchaseRecordsManagementList()},currentChangeHandle:function(e){this.formData.page=e,this.getPurchaseRecordsManagementList()},onSearch:function(){this.formData.page=1,this.getPurchaseRecordsManagementList()},onReset:function(){this.formData.formInline.stallNo=\"\",this.formData.formInline.purchaserPhoneNumber=\"\",this.formData.formInline.businessName=\"\",this.formData.formInline.goodsName=\"\",this.formData.formInline.purchaseTime=null,this.getPurchaseRecordsManagementList()},onExport:function(){var e=this,t={limit:999999,page:1,boothNo:\"\",buyerMobileNo:\"\",dealTimeStart:\"\",dealTimeEnd:\"\",goodsName:\"\",proprietorName:\"\"};d(t).then((function(t){if(0===t.code&&t.data){var a=t.data.map((function(e){return{\"采购时间\":e.dealTime,\"采购商手机号\":e.buyerMobileNo,\"摊位号\":e.boothNo,\"商户名称\":e.proprietorName,\"商品名称\":e.goodsName,\"采购量\":e.goodsWeight+e.unit}}));e.generateExcel(a)}else e.$message.error(\"导出失败\")}))},generateExcel:function(e){var t=c.a.utils.book_new(),a=c.a.utils.json_to_sheet(e),i=[{wch:30},{wch:30},{wch:30},{wch:30},{wch:30},{wch:30}];a[\"!cols\"]=i,c.a.utils.book_append_sheet(t,a,\"采购记录导出\");for(var o=c.a.write(t,{bookType:\"xlsx\",type:\"binary\"}),n=new ArrayBuffer(o.length),s=new Uint8Array(n),r=0;r<o.length;r++)s[r]=255&o.charCodeAt(r);var l=new Blob([n],{type:\"application/octet-stream\"});f.a.saveAs(l,\"采购记录导出.xlsx\")}}},y=C,I=(a(\"a440\"),Object(D[\"a\"])(y,i,o,!1,null,\"74021ad3\",null));t[\"default\"]=I.exports},a440:function(e,t,a){\"use strict\";a(\"2403\")},d293:function(e,t,a){}}]);","extractedComments":[]}