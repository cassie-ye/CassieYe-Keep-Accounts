{"remainingRequest":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\updatePassword.vue?vue&type=style&index=0&id=4b79d2aa&lang=scss&scoped=true","dependencies":[{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\updatePassword.vue","mtime":1733296131837},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\css-loader\\dist\\cjs.js","mtime":1733119317109},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733119318739},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\postcss-loader\\src\\index.js","mtime":1733119317751},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js","mtime":1733119318248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWlucHV0IHsKICB3aWR0aDogNDcwcHg7Cn0KCi5kaWFsb2ctZm9vdGVyIHsKICB0ZXh0LWFsaWduOiByaWdodDsKICBtYXJnaW4tdG9wOiAyMHB4Owp9Cg=="},{"version":3,"sources":["updatePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"updatePassword.vue","sourceRoot":"src/views/stallManagement","sourcesContent":["<template>\n  <div>\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogVisible\" width=\"35%\" :before-close=\"handleClose\" center>\n      <el-form ref=\"passwordForm\" :model=\"formData\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"原密码\" prop=\"oldPassword\">\n          <el-input v-model=\"formData.oldPassword\" type=\"password\" placeholder=\"请输入原密码\" show-password />\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\n          <el-input v-model=\"formData.newPassword\" type=\"password\" placeholder=\"请输入新密码\" show-password />\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n          <el-input v-model=\"formData.confirmPassword\" type=\"password\" placeholder=\"请再次输入新密码\" show-password />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose\">取 消</el-button>\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"handleSubmit\">保 存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { updateStallPasswordAPI } from '@/api/stallManagement'\nexport default {\n  name: 'UpdatePassword',\n  props: {\n    stallData: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    // 验证确认密码是否一致\n    const validateConfirmPassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== this.formData.newPassword) {\n        callback(new Error('两次输入密码不一致!'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      dialogVisible: false,\n      loading: false,\n      formData: {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      rules: {\n        oldPassword: [\n          { required: true, message: '请输入原密码', trigger: 'blur' }\n        ],\n        newPassword: [\n          { required: true, message: '请输入新密码', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请再次输入新密码', trigger: 'blur' },\n          { validator: validateConfirmPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    show() {\n      this.dialogVisible = true\n      if (this.$refs.passwordForm) {\n        this.$refs.passwordForm.resetFields()\n      }\n    },\n    handleClose() {\n      this.dialogVisible = false\n      if (this.$refs.passwordForm) {\n        this.$refs.passwordForm.resetFields()\n      }\n    },\n\n    handleSubmit() {\n      this.$refs.passwordForm.validate(async(valid) => {\n        if (valid) {\n          this.loading = true\n          const data = {\n            baseId: this.stallData.baseId,\n            oldPassword: this.formData.oldPassword,\n            newPassword: this.formData.newPassword,\n            newRepeatPassword: this.formData.confirmPassword\n          }\n          const res = await updateStallPasswordAPI(data)\n          if (res.code === 0) {\n            this.$message.success('密码修改成功')\n            this.handleClose()\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-input {\n  width: 470px;\n}\n\n.dialog-footer {\n  text-align: right;\n  margin-top: 20px;\n}\n</style>\n"]}]}