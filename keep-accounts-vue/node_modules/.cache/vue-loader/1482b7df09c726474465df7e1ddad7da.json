{"remainingRequest":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\stallManagement.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\stallManagement.vue","mtime":1733732096771},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\babel-loader\\lib\\index.js","mtime":1733119317753},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js","mtime":1733119318248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFN0YWxsTWFuYWdlbWVudExpc3RBUEksIGV4cG9ydFFyQ29kZUFQSSB9IGZyb20gJ0AvYXBpL3N0YWxsTWFuYWdlbWVudCcKaW1wb3J0IFFyQ29kZURpYWxvZyBmcm9tICcuL3FyQ29kZURpYWxvZy52dWUnCmltcG9ydCBVcGRhdGVQYXNzd29yZCBmcm9tICcuL3VwZGF0ZVBhc3N3b3JkLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZUxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIFFyQ29kZURpYWxvZywKICAgIFVwZGF0ZVBhc3N3b3JkCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g5YiX6KGo5Yqg6L295o6n5Yi2CiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICAvLyDmkYrkvY3liJfooagKICAgICAgc3RhbGxMaXN0OiBbXSwKICAgICAgLy8g5YiX6KGo5oC75pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDlvZPliY3pgInkuK3nmoTmkYrkvY3mlbDmja4KICAgICAgY3VycmVudFN0YWxsRGF0YTogbnVsbCwKCiAgICAgIC8vIOivt+axguWPguaVsAogICAgICBmb3JtRGF0YTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIGZvcm1JbmxpbmU6IHsKICAgICAgICAgIHN0YWxsTm86ICcnLAogICAgICAgICAgbWFya2V0TmFtZTogJycsCiAgICAgICAgICBidXNzaW5lc3NOYW1lOiAnJywKICAgICAgICAgIHBob25lTnVtYmVyOiAnJwogICAgICAgIH0KICAgICAgfQoKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFN0YWxsTWFuYWdlbWVudExpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0U3RhbGxNYW5hZ2VtZW50TGlzdCgpIHsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIC8vIOW9k+WJjemhtQogICAgICAgIHBhZ2U6IHRoaXMuZm9ybURhdGEucGFnZSwKICAgICAgICAvLyDpobXlpKflsI8KICAgICAgICBsaW1pdDogdGhpcy5mb3JtRGF0YS5saW1pdCwKICAgICAgICAvLyDmkYrkvY3lj7cKICAgICAgICBib290aE5vOiB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUuc3RhbGxObywKICAgICAgICAvLyDllYbmiLflkI3np7AKICAgICAgICBwcm9wcmlldG9yTmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmJ1c3NpbmVzc05hbWUsCiAgICAgICAgLy8g5biC5Zy6CiAgICAgICAgbWFya2V0TmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLm1hcmtldE5hbWUsCiAgICAgICAgLy8g55S16K+dCiAgICAgICAgbW9iaWxlTm86IHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5waG9uZU51bWJlcgogICAgICB9CiAgICAgIGdldFN0YWxsTWFuYWdlbWVudExpc3RBUEkocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zdGFsbExpc3QgPSByZXMuZGF0YQogICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIocmVzLmNvdW50KQogICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIHNpemVDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGEubGltaXQgPSB2YWwKICAgICAgdGhpcy5mb3JtRGF0YS5wYWdlID0gMQogICAgICB0aGlzLmdldFN0YWxsTWFuYWdlbWVudExpc3QoKQogICAgfSwKICAgIGN1cnJlbnRDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGEucGFnZSA9IHZhbAogICAgICB0aGlzLmdldFN0YWxsTWFuYWdlbWVudExpc3QoKQogICAgfSwKICAgIG9uU2VhcmNoKCkgewogICAgICB0aGlzLmZvcm1EYXRhLnBhZ2UgPSAxCiAgICAgIC8vIHRoaXMuZm9ybURhdGEubGltaXQgPSAxMAogICAgICB0aGlzLmdldFN0YWxsTWFuYWdlbWVudExpc3QoKQogICAgfSwKICAgIG9uUmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5zdGFsbE5vID0gJycKICAgICAgdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLm1hcmtldE5hbWUgPSAnJwogICAgICB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUuYnVzc2luZXNzTmFtZSA9ICcnCiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5waG9uZU51bWJlciA9ICcnCiAgICAgIHRoaXMuZ2V0U3RhbGxNYW5hZ2VtZW50TGlzdCgpCiAgICB9LAogICAgc2hvd1FyQ29kZShyb3cpIHsKICAgICAgaWYgKCFyb3cucXJDb2RlQmFzZTY0KSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor6XmkYrkvY3mmoLml6Dkuoznu7TnoIHmlbDmja4nKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuY3VycmVudFN0YWxsRGF0YSA9IHJvdwogICAgICB0aGlzLiRyZWZzLnFyQ29kZURpYWxvZy5zaG93KCkKICAgIH0sCiAgICBzaG93VXBkYXRlUGFzc3dvcmQocm93KSB7CiAgICAgIHRoaXMuY3VycmVudFN0YWxsRGF0YSA9IHJvdwogICAgICB0aGlzLiRyZWZzLnVwZGF0ZVBhc3N3b3JkRGlhbG9nLnNob3coKQogICAgfSwKCiAgICAvKioKICAgICAqIOmAieaLqeWkmumAieahhgogICAgICogQHBhcmFtIHZhbAogICAgICovCiAgICAvLyBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAvLyAgIHRoaXMuYmFzZUlkTGlzdCA9IHZhbC5tYXAoKGl0ZW0pID0+IHsKICAgIC8vICAgICByZXR1cm4gaXRlbS5iYXNlSWQKICAgIC8vICAgfSkKICAgIC8vIH0sCgogICAgLyoqCiAgICAgKiDmibnph4/lr7zlh7rkuoznu7TnoIEKICAgICAqLwogICAgb25FeHBvcnQoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAvLyDmkYrkvY3lj7cKICAgICAgICBib290aE5vOiB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUuc3RhbGxObywKICAgICAgICAvLyDllYbmiLflkI3np7AKICAgICAgICBwcm9wcmlldG9yTmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmJ1c3NpbmVzc05hbWUsCiAgICAgICAgLy8g5biC5Zy6CiAgICAgICAgbWFya2V0TmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLm1hcmtldE5hbWUsCiAgICAgICAgLy8g55S16K+dCiAgICAgICAgbW9iaWxlTm86IHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5waG9uZU51bWJlcgogICAgICB9CiAgICAgIGV4cG9ydFFyQ29kZUFQSShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmRvd25sb2FkRXhjZWwoJ+S6jOe7tOeggScsIHJlcy5kYXRhKQogICAgICB9KQogICAgfSwKICAgIGRvd25sb2FkRXhjZWwoZmlsZU5hbWUsIGV4Y2VsRGF0YSkgewogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2V4Y2VsRGF0YV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0O2NoYXJzZXQ9VVRGLTgnIH0pCiAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKQogICAgICBhLmRvd25sb2FkID0gZmlsZU5hbWUKICAgICAgYS5jbGljaygpCiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKQogICAgfQogIH0KfQo="},{"version":3,"sources":["stallManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"stallManagement.vue","sourceRoot":"src/views/stallManagement","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :inline=\"true\" :model=\"formData.formInline\" class=\"demo-form-inline\">\n      <el-form-item class=\"el-form-item\" label=\"摊位号：\">\n        <el-input v-model=\"formData.formInline.stallNo\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"市场：\">\n        <el-input v-model=\"formData.formInline.marketName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"商户名称：\">\n        <el-input v-model=\"formData.formInline.bussinessName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item style=\"margin-top: -6px;\" class=\"el-form-item\" label=\"电话：\">\n        <el-input v-model=\"formData.formInline.phoneNumber\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"button-group\">\n        <el-button type=\"primary\" class=\"search-btn\" @click=\"onSearch\">搜索</el-button>\n        <el-button type=\"primary\" class=\"reset-btn\" @click=\"onReset\">重置</el-button>\n        <el-button type=\"primary\" class=\"export-btn\" @click=\"onExport\">批量导出二维码</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table v-loading=\"listLoading\" :data=\"stallList\" border fit highlight-current-row style=\"width: 100%\">\n      <el-table-column label=\"序号\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.$index + 1 }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"摊位号\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.boothNo || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"市场\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.marketName || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"商户名称\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.proprietorName || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"电话\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.mobileNo || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"showQrCode(scope.row)\">二维码</el-button>\n          <el-button type=\"text\" @click=\"showUpdatePassword(scope.row)\">修改密码</el-button>\n        </template>\n      </el-table-column>\n\n    </el-table>\n\n    <el-pagination\n      style=\"margin-top: 20px;\"\n      :current-page=\"formData.page\"\n      :page-sizes=\"[10, 20, 50, 100]\"\n      :page-size=\"formData.limit\"\n      :total=\"total\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      @size-change=\"sizeChangeHandle\"\n      @current-change=\"currentChangeHandle\"\n    />\n    <qr-code-dialog ref=\"qrCodeDialog\" :stall-data=\"currentStallData\" />\n    <update-password ref=\"updatePasswordDialog\" :stall-data=\"currentStallData\" />\n  </div>\n</template>\n\n<script>\nimport { getStallManagementListAPI, exportQrCodeAPI } from '@/api/stallManagement'\nimport QrCodeDialog from './qrCodeDialog.vue'\nimport UpdatePassword from './updatePassword.vue'\n\nexport default {\n  name: 'ArticleList',\n  components: {\n    QrCodeDialog,\n    UpdatePassword\n  },\n  data() {\n    return {\n      // 列表加载控制\n      listLoading: true,\n      // 摊位列表\n      stallList: [],\n      // 列表总数\n      total: 0,\n      // 当前选中的摊位数据\n      currentStallData: null,\n\n      // 请求参数\n      formData: {\n        page: 1,\n        limit: 10,\n        formInline: {\n          stallNo: '',\n          marketName: '',\n          bussinessName: '',\n          phoneNumber: ''\n        }\n      }\n\n    }\n  },\n  created() {\n    this.getStallManagementList()\n  },\n  methods: {\n    getStallManagementList() {\n      this.listLoading = true\n      const params = {\n        // 当前页\n        page: this.formData.page,\n        // 页大小\n        limit: this.formData.limit,\n        // 摊位号\n        boothNo: this.formData.formInline.stallNo,\n        // 商户名称\n        proprietorName: this.formData.formInline.bussinessName,\n        // 市场\n        marketName: this.formData.formInline.marketName,\n        // 电话\n        mobileNo: this.formData.formInline.phoneNumber\n      }\n      getStallManagementListAPI(params).then(res => {\n        this.stallList = res.data\n        this.total = Number(res.count)\n        this.listLoading = false\n      })\n    },\n    sizeChangeHandle(val) {\n      this.formData.limit = val\n      this.formData.page = 1\n      this.getStallManagementList()\n    },\n    currentChangeHandle(val) {\n      this.formData.page = val\n      this.getStallManagementList()\n    },\n    onSearch() {\n      this.formData.page = 1\n      // this.formData.limit = 10\n      this.getStallManagementList()\n    },\n    onReset() {\n      this.formData.formInline.stallNo = ''\n      this.formData.formInline.marketName = ''\n      this.formData.formInline.bussinessName = ''\n      this.formData.formInline.phoneNumber = ''\n      this.getStallManagementList()\n    },\n    showQrCode(row) {\n      if (!row.qrCodeBase64) {\n        this.$message.warning('该摊位暂无二维码数据')\n        return\n      }\n      this.currentStallData = row\n      this.$refs.qrCodeDialog.show()\n    },\n    showUpdatePassword(row) {\n      this.currentStallData = row\n      this.$refs.updatePasswordDialog.show()\n    },\n\n    /**\n     * 选择多选框\n     * @param val\n     */\n    // handleSelectionChange(val) {\n    //   this.baseIdList = val.map((item) => {\n    //     return item.baseId\n    //   })\n    // },\n\n    /**\n     * 批量导出二维码\n     */\n    onExport() {\n      const params = {\n        // 摊位号\n        boothNo: this.formData.formInline.stallNo,\n        // 商户名称\n        proprietorName: this.formData.formInline.bussinessName,\n        // 市场\n        marketName: this.formData.formInline.marketName,\n        // 电话\n        mobileNo: this.formData.formInline.phoneNumber\n      }\n      exportQrCodeAPI(params).then(res => {\n        this.downloadExcel('二维码', res.data)\n      })\n    },\n    downloadExcel(fileName, excelData) {\n      const blob = new Blob([excelData], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8' })\n      const a = document.createElement('a')\n      a.href = URL.createObjectURL(blob)\n      a.download = fileName\n      a.click()\n      URL.revokeObjectURL(a.href)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.edit-input {\n  padding-right: 100px;\n}\n\n.cancel-btn {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n\n.demo-form-inline {\n  width: 100%;\n\n  .el-form-item {\n    margin-right: 40px;\n\n    .el-input {\n      width: 250px;\n      margin-top: 6px;\n    }\n  }\n}\n\n.button-group {\n\n  .search-btn,\n  .export-btn {\n    background-color: #2f58e3;\n    border: #2f58e3;\n  }\n\n  .reset-btn {\n    background-color: #ff2727;\n    border: #ff2727;\n  }\n\n  .el-button {\n    margin-right: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n    border-radius: 2px;\n  }\n}\n</style>\n"]}]}