{"remainingRequest":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\updatePassword.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\stallManagement\\updatePassword.vue","mtime":1733464499331},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\babel-loader\\lib\\index.js","mtime":1733119317753},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js","mtime":1733119318248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwZGF0ZVN0YWxsUGFzc3dvcmRBUEkgfSBmcm9tICdAL2FwaS9zdGFsbE1hbmFnZW1lbnQnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXBkYXRlUGFzc3dvcmQnLAogIHByb3BzOiB7CiAgICBzdGFsbERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgLy8g6aqM6K+B56Gu6K6k5a+G56CB5piv5ZCm5LiA6Ie0CiAgICBjb25zdCB2YWxpZGF0ZUNvbmZpcm1QYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMuZm9ybURhdGEubmV3UGFzc3dvcmQpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEnKSkKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvLyBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICBvbGRQYXNzd29yZDogJycsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICcnLAogICAgICAgIGNvbmZpcm1QYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBvbGRQYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWOn+WvhueggScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBuZXdQYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaWsOWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBjb25maXJtUGFzc3dvcmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7flho3mrKHovpPlhaXmlrDlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiB2YWxpZGF0ZUNvbmZpcm1QYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3coKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgaWYgKHRoaXMuJHJlZnMucGFzc3dvcmRGb3JtKSB7CiAgICAgICAgdGhpcy4kcmVmcy5wYXNzd29yZEZvcm0ucmVzZXRGaWVsZHMoKQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIGlmICh0aGlzLiRyZWZzLnBhc3N3b3JkRm9ybSkgewogICAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmRGb3JtLnJlc2V0RmllbGRzKCkKICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmRGb3JtLnZhbGlkYXRlKGFzeW5jKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICBiYXNlSWQ6IHRoaXMuc3RhbGxEYXRhLmJhc2VJZCwKICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IHRoaXMuZm9ybURhdGEub2xkUGFzc3dvcmQsCiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiB0aGlzLmZvcm1EYXRhLm5ld1Bhc3N3b3JkLAogICAgICAgICAgICBuZXdSZXBlYXRQYXNzd29yZDogdGhpcy5mb3JtRGF0YS5jb25maXJtUGFzc3dvcmQKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHVwZGF0ZVN0YWxsUGFzc3dvcmRBUEkoZGF0YSkKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WvhueggeS/ruaUueaIkOWKnycpCiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["updatePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updatePassword.vue","sourceRoot":"src/views/stallManagement","sourcesContent":["<template>\n  <div>\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogVisible\" width=\"35%\" :before-close=\"handleClose\" center>\n      <el-form ref=\"passwordForm\" :model=\"formData\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"原密码\" prop=\"oldPassword\">\n          <el-input v-model=\"formData.oldPassword\" type=\"password\" placeholder=\"请输入原密码\" show-password />\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\n          <el-input v-model=\"formData.newPassword\" type=\"password\" placeholder=\"请输入新密码\" show-password />\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n          <el-input v-model=\"formData.confirmPassword\" type=\"password\" placeholder=\"请再次输入新密码\" show-password />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\">保 存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { updateStallPasswordAPI } from '@/api/stallManagement'\nexport default {\n  name: 'UpdatePassword',\n  props: {\n    stallData: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    // 验证确认密码是否一致\n    const validateConfirmPassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== this.formData.newPassword) {\n        callback(new Error('两次输入密码不一致!'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      dialogVisible: false,\n      // loading: false,\n      formData: {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      rules: {\n        oldPassword: [\n          { required: true, message: '请输入原密码', trigger: 'blur' }\n        ],\n        newPassword: [\n          { required: true, message: '请输入新密码', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请再次输入新密码', trigger: 'blur' },\n          { validator: validateConfirmPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    show() {\n      this.dialogVisible = true\n      if (this.$refs.passwordForm) {\n        this.$refs.passwordForm.resetFields()\n      }\n    },\n    handleClose() {\n      this.dialogVisible = false\n      if (this.$refs.passwordForm) {\n        this.$refs.passwordForm.resetFields()\n      }\n    },\n\n    handleSubmit() {\n      this.$refs.passwordForm.validate(async(valid) => {\n        if (valid) {\n          const data = {\n            baseId: this.stallData.baseId,\n            oldPassword: this.formData.oldPassword,\n            newPassword: this.formData.newPassword,\n            newRepeatPassword: this.formData.confirmPassword\n          }\n          const res = await updateStallPasswordAPI(data)\n          if (res.code === 0) {\n            this.$message.success('密码修改成功')\n            this.handleClose()\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-input {\n  // width: 470px;\n}\n\n.dialog-footer {\n  text-align: right;\n  margin-top: 20px;\n}\n</style>\n"]}]}