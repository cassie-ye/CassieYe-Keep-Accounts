{"remainingRequest":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\babel-loader\\lib\\index.js!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\example\\components\\ArticleDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\example\\components\\ArticleDetail.vue","mtime":1733119120320},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\babel.config.js","mtime":1733119120270},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\babel-loader\\lib\\index.js","mtime":1733119317753},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js","mtime":1733119318248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IFRpbnltY2UgZnJvbSAnQC9jb21wb25lbnRzL1RpbnltY2UnOwppbXBvcnQgVXBsb2FkIGZyb20gJ0AvY29tcG9uZW50cy9VcGxvYWQvU2luZ2xlSW1hZ2UzJzsKaW1wb3J0IE1EaW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL01EaW5wdXQnOwppbXBvcnQgU3RpY2t5IGZyb20gJ0AvY29tcG9uZW50cy9TdGlja3knOyAvLyDnspjmgKdoZWFkZXLnu4Tku7YKaW1wb3J0IHsgdmFsaWRVUkwgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJzsKaW1wb3J0IHsgZmV0Y2hBcnRpY2xlIH0gZnJvbSAnQC9hcGkvYXJ0aWNsZSc7CmltcG9ydCB7IHNlYXJjaFVzZXIgfSBmcm9tICdAL2FwaS9yZW1vdGUtc2VhcmNoJzsKaW1wb3J0IFdhcm5pbmcgZnJvbSAnLi9XYXJuaW5nJzsKaW1wb3J0IHsgQ29tbWVudERyb3Bkb3duLCBQbGF0Zm9ybURyb3Bkb3duLCBTb3VyY2VVcmxEcm9wZG93biB9IGZyb20gJy4vRHJvcGRvd24nOwp2YXIgZGVmYXVsdEZvcm0gPSB7CiAgc3RhdHVzOiAnZHJhZnQnLAogIHRpdGxlOiAnJywKICAvLyDmlofnq6Dpopjnm64KICBjb250ZW50OiAnJywKICAvLyDmlofnq6DlhoXlrrkKICBjb250ZW50X3Nob3J0OiAnJywKICAvLyDmlofnq6DmkZjopoEKICBzb3VyY2VfdXJpOiAnJywKICAvLyDmlofnq6DlpJbpk74KICBpbWFnZV91cmk6ICcnLAogIC8vIOaWh+eroOWbvueJhwogIGRpc3BsYXlfdGltZTogdW5kZWZpbmVkLAogIC8vIOWJjeWPsOWxleekuuaXtumXtAogIGlkOiB1bmRlZmluZWQsCiAgcGxhdGZvcm1zOiBbJ2EtcGxhdGZvcm0nXSwKICBjb21tZW50X2Rpc2FibGVkOiBmYWxzZSwKICBpbXBvcnRhbmNlOiAwCn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZURldGFpbCcsCiAgY29tcG9uZW50czogewogICAgVGlueW1jZTogVGlueW1jZSwKICAgIE1EaW5wdXQ6IE1EaW5wdXQsCiAgICBVcGxvYWQ6IFVwbG9hZCwKICAgIFN0aWNreTogU3RpY2t5LAogICAgV2FybmluZzogV2FybmluZywKICAgIENvbW1lbnREcm9wZG93bjogQ29tbWVudERyb3Bkb3duLAogICAgUGxhdGZvcm1Ecm9wZG93bjogUGxhdGZvcm1Ecm9wZG93biwKICAgIFNvdXJjZVVybERyb3Bkb3duOiBTb3VyY2VVcmxEcm9wZG93bgogIH0sCiAgcHJvcHM6IHsKICAgIGlzRWRpdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgdmFsaWRhdGVSZXF1aXJlID0gZnVuY3Rpb24gdmFsaWRhdGVSZXF1aXJlKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcnVsZS5maWVsZCArICfkuLrlv4XkvKDpobknLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihydWxlLmZpZWxkICsgJ+S4uuW/heS8oOmhuScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgdmFyIHZhbGlkYXRlU291cmNlVXJpID0gZnVuY3Rpb24gdmFsaWRhdGVTb3VyY2VVcmkocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIGlmICh2YWxpZFVSTCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+WklumTvnVybOWhq+WGmeS4jeato+ehricsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCflpJbpk751cmzloavlhpnkuI3mraPnoa4nKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBwb3N0Rm9ybTogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEZvcm0pLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdXNlckxpc3RPcHRpb25zOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBpbWFnZV91cmk6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUmVxdWlyZQogICAgICAgIH1dLAogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVJlcXVpcmUKICAgICAgICB9XSwKICAgICAgICBjb250ZW50OiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVJlcXVpcmUKICAgICAgICB9XSwKICAgICAgICBzb3VyY2VfdXJpOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVNvdXJjZVVyaSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHRlbXBSb3V0ZToge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29udGVudFNob3J0TGVuZ3RoOiBmdW5jdGlvbiBjb250ZW50U2hvcnRMZW5ndGgoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvc3RGb3JtLmNvbnRlbnRfc2hvcnQubGVuZ3RoOwogICAgfSwKICAgIGRpc3BsYXlUaW1lOiB7CiAgICAgIC8vIHNldCBhbmQgZ2V0IGlzIHVzZWZ1bCB3aGVuIHRoZSBkYXRhCiAgICAgIC8vIHJldHVybmVkIGJ5IHRoZSBiYWNrIGVuZCBhcGkgaXMgZGlmZmVyZW50IGZyb20gdGhlIGZyb250IGVuZAogICAgICAvLyBiYWNrIGVuZCByZXR1cm4gPT4gIjIwMTMtMDYtMjUgMDY6NTk6MjUiCiAgICAgIC8vIGZyb250IGVuZCBuZWVkIHRpbWVzdGFtcCA9PiAxMzcyMTE0NzY1MDAwCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiArbmV3IERhdGUodGhpcy5wb3N0Rm9ybS5kaXNwbGF5X3RpbWUpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICB0aGlzLnBvc3RGb3JtLmRpc3BsYXlfdGltZSA9IG5ldyBEYXRlKHZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5pc0VkaXQpIHsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgdGhpcy5mZXRjaERhdGEoaWQpOwogICAgfQoKICAgIC8vIFdoeSBuZWVkIHRvIG1ha2UgYSBjb3B5IG9mIHRoaXMuJHJvdXRlIGhlcmU/CiAgICAvLyBCZWNhdXNlIGlmIHlvdSBlbnRlciB0aGlzIHBhZ2UgYW5kIHF1aWNrbHkgc3dpdGNoIHRhZywgbWF5IGJlIGluIHRoZSBleGVjdXRpb24gb2YgdGhlIHNldFRhZ3NWaWV3VGl0bGUgZnVuY3Rpb24sIHRoaXMuJHJvdXRlIGlzIG5vIGxvbmdlciBwb2ludGluZyB0byB0aGUgY3VycmVudCBwYWdlCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMTIyMQogICAgdGhpcy50ZW1wUm91dGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLiRyb3V0ZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YShpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgZmV0Y2hBcnRpY2xlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5wb3N0Rm9ybSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIC8vIGp1c3QgZm9yIHRlc3QKICAgICAgICBfdGhpczIucG9zdEZvcm0udGl0bGUgKz0gIiAgIEFydGljbGUgSWQ6Ii5jb25jYXQoX3RoaXMyLnBvc3RGb3JtLmlkKTsKICAgICAgICBfdGhpczIucG9zdEZvcm0uY29udGVudF9zaG9ydCArPSAiICAgQXJ0aWNsZSBJZDoiLmNvbmNhdChfdGhpczIucG9zdEZvcm0uaWQpOwoKICAgICAgICAvLyBzZXQgdGFnc3ZpZXcgdGl0bGUKICAgICAgICBfdGhpczIuc2V0VGFnc1ZpZXdUaXRsZSgpOwoKICAgICAgICAvLyBzZXQgcGFnZSB0aXRsZQogICAgICAgIF90aGlzMi5zZXRQYWdlVGl0bGUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHNldFRhZ3NWaWV3VGl0bGU6IGZ1bmN0aW9uIHNldFRhZ3NWaWV3VGl0bGUoKSB7CiAgICAgIHZhciB0aXRsZSA9ICdFZGl0IEFydGljbGUnOwogICAgICB2YXIgcm91dGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnRlbXBSb3V0ZSwgewogICAgICAgIHRpdGxlOiAiIi5jb25jYXQodGl0bGUsICItIikuY29uY2F0KHRoaXMucG9zdEZvcm0uaWQpCiAgICAgIH0pOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvdXBkYXRlVmlzaXRlZFZpZXcnLCByb3V0ZSk7CiAgICB9LAogICAgc2V0UGFnZVRpdGxlOiBmdW5jdGlvbiBzZXRQYWdlVGl0bGUoKSB7CiAgICAgIHZhciB0aXRsZSA9ICdFZGl0IEFydGljbGUnOwogICAgICBkb2N1bWVudC50aXRsZSA9ICIiLmNvbmNhdCh0aXRsZSwgIiAtICIpLmNvbmNhdCh0aGlzLnBvc3RGb3JtLmlkKTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgY29uc29sZS5sb2codGhpcy5wb3N0Rm9ybSk7CiAgICAgIHRoaXMuJHJlZnMucG9zdEZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICBfdGhpczMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WPkeW4g+aWh+eroOaIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMzLnBvc3RGb3JtLnN0YXR1cyA9ICdwdWJsaXNoZWQnOwogICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkcmFmdEZvcm06IGZ1bmN0aW9uIGRyYWZ0Rm9ybSgpIHsKICAgICAgaWYgKHRoaXMucG9zdEZvcm0uY29udGVudC5sZW5ndGggPT09IDAgfHwgdGhpcy5wb3N0Rm9ybS50aXRsZS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnlv4XopoHnmoTmoIfpopjlkozlhoXlrrknLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICfkv53lrZjmiJDlip8nLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgfSk7CiAgICAgIHRoaXMucG9zdEZvcm0uc3RhdHVzID0gJ2RyYWZ0JzsKICAgIH0sCiAgICBnZXRSZW1vdGVVc2VyTGlzdDogZnVuY3Rpb24gZ2V0UmVtb3RlVXNlckxpc3QocXVlcnkpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHNlYXJjaFVzZXIocXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLml0ZW1zKSByZXR1cm47CiAgICAgICAgX3RoaXM0LnVzZXJMaXN0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGEuaXRlbXMubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdi5uYW1lOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Tinymce","Upload","MDinput","Sticky","validURL","fetchArticle","searchUser","Warning","CommentDropdown","PlatformDropdown","SourceUrlDropdown","defaultForm","status","title","content","content_short","source_uri","image_uri","display_time","undefined","id","platforms","comment_disabled","importance","name","components","props","isEdit","type","Boolean","default","data","_this","validateRequire","rule","value","callback","$message","message","field","Error","validateSourceUri","postForm","Object","assign","loading","userListOptions","rules","validator","trigger","tempRoute","computed","contentShortLength","length","displayTime","get","Date","set","val","created","$route","params","fetchData","methods","_this2","then","response","concat","setTagsViewTitle","setPageTitle","catch","err","console","log","route","$store","dispatch","document","submitForm","_this3","$refs","validate","valid","$notify","duration","draftForm","showClose","getRemoteUserList","query","_this4","items","map","v"],"sources":["src/views/example/components/ArticleDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"createPost-container\">\r\n    <el-form ref=\"postForm\" :model=\"postForm\" :rules=\"rules\" class=\"form-container\">\r\n\r\n      <sticky :z-index=\"10\" :class-name=\"'sub-navbar '+postForm.status\">\r\n        <CommentDropdown v-model=\"postForm.comment_disabled\" />\r\n        <PlatformDropdown v-model=\"postForm.platforms\" />\r\n        <SourceUrlDropdown v-model=\"postForm.source_uri\" />\r\n        <el-button v-loading=\"loading\" style=\"margin-left: 10px;\" type=\"success\" @click=\"submitForm\">\r\n          Publish\r\n        </el-button>\r\n        <el-button v-loading=\"loading\" type=\"warning\" @click=\"draftForm\">\r\n          Draft\r\n        </el-button>\r\n      </sticky>\r\n\r\n      <div class=\"createPost-main-container\">\r\n        <el-row>\r\n          <Warning />\r\n\r\n          <el-col :span=\"24\">\r\n            <el-form-item style=\"margin-bottom: 40px;\" prop=\"title\">\r\n              <MDinput v-model=\"postForm.title\" :maxlength=\"100\" name=\"name\" required>\r\n                Title\r\n              </MDinput>\r\n            </el-form-item>\r\n\r\n            <div class=\"postInfo-container\">\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label-width=\"60px\" label=\"Author:\" class=\"postInfo-container-item\">\r\n                    <el-select v-model=\"postForm.author\" :remote-method=\"getRemoteUserList\" filterable default-first-option remote placeholder=\"Search user\">\r\n                      <el-option v-for=\"(item,index) in userListOptions\" :key=\"item+index\" :label=\"item\" :value=\"item\" />\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n\r\n                <el-col :span=\"10\">\r\n                  <el-form-item label-width=\"120px\" label=\"Publish Time:\" class=\"postInfo-container-item\">\r\n                    <el-date-picker v-model=\"displayTime\" type=\"datetime\" format=\"yyyy-MM-dd HH:mm:ss\" placeholder=\"Select date and time\" />\r\n                  </el-form-item>\r\n                </el-col>\r\n\r\n                <el-col :span=\"6\">\r\n                  <el-form-item label-width=\"90px\" label=\"Importance:\" class=\"postInfo-container-item\">\r\n                    <el-rate\r\n                      v-model=\"postForm.importance\"\r\n                      :max=\"3\"\r\n                      :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\"\r\n                      :low-threshold=\"1\"\r\n                      :high-threshold=\"3\"\r\n                      style=\"display:inline-block\"\r\n                    />\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-form-item style=\"margin-bottom: 40px;\" label-width=\"70px\" label=\"Summary:\">\r\n          <el-input v-model=\"postForm.content_short\" :rows=\"1\" type=\"textarea\" class=\"article-textarea\" autosize placeholder=\"Please enter the content\" />\r\n          <span v-show=\"contentShortLength\" class=\"word-counter\">{{ contentShortLength }}words</span>\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"content\" style=\"margin-bottom: 30px;\">\r\n          <Tinymce ref=\"editor\" v-model=\"postForm.content\" :height=\"400\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"image_uri\" style=\"margin-bottom: 30px;\">\r\n          <Upload v-model=\"postForm.image_uri\" />\r\n        </el-form-item>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Tinymce from '@/components/Tinymce'\r\nimport Upload from '@/components/Upload/SingleImage3'\r\nimport MDinput from '@/components/MDinput'\r\nimport Sticky from '@/components/Sticky' // 粘性header组件\r\nimport { validURL } from '@/utils/validate'\r\nimport { fetchArticle } from '@/api/article'\r\nimport { searchUser } from '@/api/remote-search'\r\nimport Warning from './Warning'\r\nimport { CommentDropdown, PlatformDropdown, SourceUrlDropdown } from './Dropdown'\r\n\r\nconst defaultForm = {\r\n  status: 'draft',\r\n  title: '', // 文章题目\r\n  content: '', // 文章内容\r\n  content_short: '', // 文章摘要\r\n  source_uri: '', // 文章外链\r\n  image_uri: '', // 文章图片\r\n  display_time: undefined, // 前台展示时间\r\n  id: undefined,\r\n  platforms: ['a-platform'],\r\n  comment_disabled: false,\r\n  importance: 0\r\n}\r\n\r\nexport default {\r\n  name: 'ArticleDetail',\r\n  components: { Tinymce, MDinput, Upload, Sticky, Warning, CommentDropdown, PlatformDropdown, SourceUrlDropdown },\r\n  props: {\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    const validateRequire = (rule, value, callback) => {\r\n      if (value === '') {\r\n        this.$message({\r\n          message: rule.field + '为必传项',\r\n          type: 'error'\r\n        })\r\n        callback(new Error(rule.field + '为必传项'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validateSourceUri = (rule, value, callback) => {\r\n      if (value) {\r\n        if (validURL(value)) {\r\n          callback()\r\n        } else {\r\n          this.$message({\r\n            message: '外链url填写不正确',\r\n            type: 'error'\r\n          })\r\n          callback(new Error('外链url填写不正确'))\r\n        }\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      postForm: Object.assign({}, defaultForm),\r\n      loading: false,\r\n      userListOptions: [],\r\n      rules: {\r\n        image_uri: [{ validator: validateRequire }],\r\n        title: [{ validator: validateRequire }],\r\n        content: [{ validator: validateRequire }],\r\n        source_uri: [{ validator: validateSourceUri, trigger: 'blur' }]\r\n      },\r\n      tempRoute: {}\r\n    }\r\n  },\r\n  computed: {\r\n    contentShortLength() {\r\n      return this.postForm.content_short.length\r\n    },\r\n    displayTime: {\r\n      // set and get is useful when the data\r\n      // returned by the back end api is different from the front end\r\n      // back end return => \"2013-06-25 06:59:25\"\r\n      // front end need timestamp => 1372114765000\r\n      get() {\r\n        return (+new Date(this.postForm.display_time))\r\n      },\r\n      set(val) {\r\n        this.postForm.display_time = new Date(val)\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    if (this.isEdit) {\r\n      const id = this.$route.params && this.$route.params.id\r\n      this.fetchData(id)\r\n    }\r\n\r\n    // Why need to make a copy of this.$route here?\r\n    // Because if you enter this page and quickly switch tag, may be in the execution of the setTagsViewTitle function, this.$route is no longer pointing to the current page\r\n    // https://github.com/PanJiaChen/vue-element-admin/issues/1221\r\n    this.tempRoute = Object.assign({}, this.$route)\r\n  },\r\n  methods: {\r\n    fetchData(id) {\r\n      fetchArticle(id).then(response => {\r\n        this.postForm = response.data\r\n\r\n        // just for test\r\n        this.postForm.title += `   Article Id:${this.postForm.id}`\r\n        this.postForm.content_short += `   Article Id:${this.postForm.id}`\r\n\r\n        // set tagsview title\r\n        this.setTagsViewTitle()\r\n\r\n        // set page title\r\n        this.setPageTitle()\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    setTagsViewTitle() {\r\n      const title = 'Edit Article'\r\n      const route = Object.assign({}, this.tempRoute, { title: `${title}-${this.postForm.id}` })\r\n      this.$store.dispatch('tagsView/updateVisitedView', route)\r\n    },\r\n    setPageTitle() {\r\n      const title = 'Edit Article'\r\n      document.title = `${title} - ${this.postForm.id}`\r\n    },\r\n    submitForm() {\r\n      console.log(this.postForm)\r\n      this.$refs.postForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true\r\n          this.$notify({\r\n            title: '成功',\r\n            message: '发布文章成功',\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.postForm.status = 'published'\r\n          this.loading = false\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    draftForm() {\r\n      if (this.postForm.content.length === 0 || this.postForm.title.length === 0) {\r\n        this.$message({\r\n          message: '请填写必要的标题和内容',\r\n          type: 'warning'\r\n        })\r\n        return\r\n      }\r\n      this.$message({\r\n        message: '保存成功',\r\n        type: 'success',\r\n        showClose: true,\r\n        duration: 1000\r\n      })\r\n      this.postForm.status = 'draft'\r\n    },\r\n    getRemoteUserList(query) {\r\n      searchUser(query).then(response => {\r\n        if (!response.data.items) return\r\n        this.userListOptions = response.data.items.map(v => v.name)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/styles/mixin.scss\";\r\n\r\n.createPost-container {\r\n  position: relative;\r\n\r\n  .createPost-main-container {\r\n    padding: 40px 45px 20px 50px;\r\n\r\n    .postInfo-container {\r\n      position: relative;\r\n      @include clearfix;\r\n      margin-bottom: 10px;\r\n\r\n      .postInfo-container-item {\r\n        float: left;\r\n      }\r\n    }\r\n  }\r\n\r\n  .word-counter {\r\n    width: 40px;\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 0px;\r\n  }\r\n}\r\n\r\n.article-textarea ::v-deep {\r\n  textarea {\r\n    padding-right: 40px;\r\n    resize: none;\r\n    border: none;\r\n    border-radius: 0px;\r\n    border-bottom: 1px solid #bfcbd9;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}