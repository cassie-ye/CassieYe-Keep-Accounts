{"remainingRequest":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\allocateGoodsManagement\\allocateGoodsRecords.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\src\\views\\allocateGoodsManagement\\allocateGoodsRecords.vue","mtime":1733384529738},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\babel-loader\\lib\\index.js","mtime":1733119317753},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733119316648},{"path":"E:\\myStudy\\guoyan\\JiangSu\\众彩\\南京众彩商户屏PC\\node_modules\\vue-loader\\lib\\index.js","mtime":1733119318248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEFsbG9jYXRlR29vZHNNYW5hZ2VtZW50TGlzdEFQSSB9IGZyb20gJ0AvYXBpL2FsbG9jYXRlR29vZHNNYW5hZ2VtZW50JwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnCmltcG9ydCBYTFNYIGZyb20gJ3hsc3gnCmltcG9ydCBGaWxlU2F2ZXIgZnJvbSAnZmlsZS1zYXZlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZUxpc3QnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b3RhbDogMCwKICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgIC8vIOivt+axguWPguaVsAogICAgICBmb3JtRGF0YTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIGZvcm1JbmxpbmU6IHsKICAgICAgICAgIC8vIOmFjei0p+aRiuS9jeWPtwogICAgICAgICAgYWxsb2NhdGVTdGFsbE5vOiAnJywKICAgICAgICAgIC8vIOmFjei0p+WVhuaIt+WQjeensAogICAgICAgICAgYWxsb2NhdGVCdXNpbmVzc05hbWU6ICcnLAogICAgICAgICAgLy8g6YWN6LSn5biC5Zy6CiAgICAgICAgICBhbGxvY2F0ZU1hcmtldE5hbWU6ICcnLAogICAgICAgICAgLy8g5L6b6LSn5pGK5L2N5Y+3CiAgICAgICAgICBwcm92aWRlU3RhbGxObzogJycsCiAgICAgICAgICAvLyDkvpvotKfllYbmiLflkI3np7AKICAgICAgICAgIHByb3ZpZGVCdXNpbmVzc05hbWU6ICcnLAogICAgICAgICAgLy8g5L6b6LSn5biC5Zy6CiAgICAgICAgICBwcm92aWRlTWFya2V0TmFtZTogJycsCiAgICAgICAgICAvLyDllYblk4HlkI3np7AKICAgICAgICAgIGdvb2RzTmFtZTogJycsCiAgICAgICAgICAvLyDphY3otKfml7bpl7QKICAgICAgICAgIGFsbG9jYXRlVGltZTogbnVsbAogICAgICAgIH0KICAgICAgfSwKCiAgICAgIC8vIOivt+axguW+l+WIsOeahOmFjei0p+WIl+ihqAogICAgICByZWNvcmRzTGlzdDogW10sCiAgICAgIC8vIOWvvOWHukV4Y2Vs6KGo5qC855qE5pWw5o2uCiAgICAgIGV4cG9ydERhdGFMaXN0OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QWxsb2NhdGVHb29kc01hbmFnZW1lbnRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFsbG9jYXRlR29vZHNNYW5hZ2VtZW50TGlzdCgpIHsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUKICAgICAgbGV0IGRlYWxUaW1lU3RhcnQgPSAnJwogICAgICBsZXQgZGVhbFRpbWVFbmQgPSAnJwogICAgICBpZiAodGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmFsbG9jYXRlVGltZSAmJiB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUuYWxsb2NhdGVUaW1lLmxlbmd0aCA9PT0gMikgewogICAgICAgIGNvbnN0IFtzdGFydERhdGUsIGVuZERhdGVdID0gdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmFsbG9jYXRlVGltZQogICAgICAgIGRlYWxUaW1lU3RhcnQgPSBkYXlqcyhzdGFydERhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgZGVhbFRpbWVFbmQgPSBkYXlqcyhlbmREYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQnKQogICAgICB9CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogdGhpcy5mb3JtRGF0YS5saW1pdCwKICAgICAgICBwYWdlOiB0aGlzLmZvcm1EYXRhLnBhZ2UsCiAgICAgICAgYm9vdGhObzogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLnByb3ZpZGVTdGFsbE5vLAogICAgICAgIGJvb3RoTm9CdXllcjogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmFsbG9jYXRlU3RhbGxObywKICAgICAgICBkZWFsVGltZVN0YXJ0LAogICAgICAgIGRlYWxUaW1lRW5kLAogICAgICAgIGdvb2RzTmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmdvb2RzTmFtZSwKICAgICAgICBtYXJrZXROYW1lOiB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUucHJvdmlkZUJ1c2luZXNzTmFtZSwKICAgICAgICBtYXJrZXROYW1lQnV5ZXI6IHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5hbGxvY2F0ZUJ1c2luZXNzTmFtZSwKICAgICAgICBwcm9wcmlldG9yTmFtZTogdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLnByb3ZpZGVNYXJrZXROYW1lLAogICAgICAgIHByb3ByaWV0b3JOYW1lQnV5ZXI6IHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5hbGxvY2F0ZU1hcmtldE5hbWUKICAgICAgfQogICAgICBnZXRBbGxvY2F0ZUdvb2RzTWFuYWdlbWVudExpc3RBUEkocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5yZWNvcmRzTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgdGhpcy50b3RhbCA9IE51bWJlcihyZXMuY291bnQpCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgc2l6ZUNoYW5nZUhhbmRsZSh2YWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5saW1pdCA9IHZhbAogICAgICB0aGlzLmZvcm1EYXRhLnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0QWxsb2NhdGVHb29kc01hbmFnZW1lbnRMaXN0KCkKICAgIH0sCiAgICBjdXJyZW50Q2hhbmdlSGFuZGxlKHZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXRBbGxvY2F0ZUdvb2RzTWFuYWdlbWVudExpc3QoKQogICAgfSwKICAgIG9uU2VhcmNoKCkgewogICAgICB0aGlzLmdldEFsbG9jYXRlR29vZHNNYW5hZ2VtZW50TGlzdCgpCiAgICB9LAogICAgb25SZXNldCgpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5mb3JtSW5saW5lLmFsbG9jYXRlU3RhbGxObyA9ICcnCiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5hbGxvY2F0ZUJ1c2luZXNzTmFtZSA9ICcnCiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5hbGxvY2F0ZU1hcmtldE5hbWUgPSAnJwogICAgICB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUucHJvdmlkZVN0YWxsTm8gPSAnJwogICAgICB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUucHJvdmlkZUJ1c2luZXNzTmFtZSA9ICcnCiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5wcm92aWRlTWFya2V0TmFtZSA9ICcnCiAgICAgIHRoaXMuZm9ybURhdGEuZm9ybUlubGluZS5nb29kc05hbWUgPSAnJwogICAgICB0aGlzLmZvcm1EYXRhLmZvcm1JbmxpbmUuYWxsb2NhdGVUaW1lID0gbnVsbAogICAgICB0aGlzLmdldEFsbG9jYXRlR29vZHNNYW5hZ2VtZW50TGlzdCgpCiAgICB9LAogICAgb25FeHBvcnQoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogOTk5OTk5LAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgYm9vdGhObzogJycsCiAgICAgICAgYm9vdGhOb0J1eWVyOiAnJywKICAgICAgICBkZWFsVGltZVN0YXJ0OiAnJywKICAgICAgICBkZWFsVGltZUVuZDogJycsCiAgICAgICAgZ29vZHNOYW1lOiAnJywKICAgICAgICBtYXJrZXROYW1lOiAnJywKICAgICAgICBtYXJrZXROYW1lQnV5ZXI6ICcnLAogICAgICAgIHByb3ByaWV0b3JOYW1lOiAnJywKICAgICAgICBwcm9wcmlldG9yTmFtZUJ1eWVyOiAnJwogICAgICB9CiAgICAgIGdldEFsbG9jYXRlR29vZHNNYW5hZ2VtZW50TGlzdEFQSShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDAgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IHJlcy5kYXRhLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAn6YWN6LSn5pe26Ze0JzogaXRlbS5kZWFsVGltZSwKICAgICAgICAgICAgICAn6YWN6LSn5pGK5L2NJzogaXRlbS5ib290aE5vQnV5ZXIsCiAgICAgICAgICAgICAgJ+mFjei0p+W4guWcuic6IGl0ZW0ucHJvcHJpZXRvck5hbWVCdXllciwKICAgICAgICAgICAgICAn6YWN6LSn5ZWG5oi35ZCN56ewJzogaXRlbS5tYXJrZXROYW1lQnV5ZXIsCiAgICAgICAgICAgICAgJ+S+m+i0p+aRiuS9jSc6IGl0ZW0uYm9vdGhObywKICAgICAgICAgICAgICAn5L6b6LSn5biC5Zy6JzogaXRlbS5wcm9wcmlldG9yTmFtZSwKICAgICAgICAgICAgICAn5L6b6LSn5ZWG5oi35ZCN56ewJzogaXRlbS5tYXJrZXROYW1lLAogICAgICAgICAgICAgICfllYblk4HlkI3np7AnOiBpdGVtLmdvb2RzTmFtZSwKICAgICAgICAgICAgICAn6YeH6LSt6YePJzogaXRlbS5nb29kc1dlaWdodCArIGl0ZW0udW5pdAogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5nZW5lcmF0ZUV4Y2VsKGV4cG9ydERhdGEpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WvvOWHuuWksei0pScpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdlbmVyYXRlRXhjZWwoZXhwb3J0RGF0YSkgewogICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKQogICAgICBjb25zdCB3cyA9IFhMU1gudXRpbHMuanNvbl90b19zaGVldChleHBvcnREYXRhKQogICAgICBjb25zdCB3c2NvbHMgPSBbeyB3Y2g6IDMwIH0sIHsgd2NoOiAzMCB9LCB7IHdjaDogMzAgfSwgeyB3Y2g6IDMwIH0sIHsgd2NoOiAzMCB9LCB7IHdjaDogMzAgfSwgeyB3Y2g6IDMwIH0sIHsgd2NoOiAzMCB9LCB7IHdjaDogMzAgfSwgeyB3Y2g6IDMwIH1dCiAgICAgIHdzWychY29scyddID0gd3Njb2xzCiAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIHdzLCAn6YWN6LSn6K6w5b2V5a+85Ye6JykKICAgICAgY29uc3Qgd2JvdXQgPSBYTFNYLndyaXRlKHdiLCB7IGJvb2tUeXBlOiAneGxzeCcsIHR5cGU6ICdiaW5hcnknIH0pCiAgICAgIGNvbnN0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcih3Ym91dC5sZW5ndGgpCiAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2JvdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICB2aWV3W2ldID0gd2JvdXQuY2hhckNvZGVBdChpKSAmIDB4RkYKICAgICAgfQogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1Zl0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSkKICAgICAgRmlsZVNhdmVyLnNhdmVBcyhibG9iLCAn6YWN6LSn6K6w5b2V5a+85Ye6Lnhsc3gnKQogICAgfQogIH0KfQo="},{"version":3,"sources":["allocateGoodsRecords.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"allocateGoodsRecords.vue","sourceRoot":"src/views/allocateGoodsManagement","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :inline=\"true\" :model=\"formData.formInline\" class=\"demo-form-inline\">\n      <el-form-item class=\"el-form-item\" label=\"配货摊位号：\">\n        <el-input v-model=\"formData.formInline.allocateStallNo\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"配货商户名称：\">\n        <el-input v-model=\"formData.formInline.allocateBusinessName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"配货市场：\">\n        <el-input v-model=\"formData.formInline.allocateMarketName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"供货摊位号：\">\n        <el-input v-model=\"formData.formInline.provideStallNo\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"供货商户名称：\">\n        <el-input v-model=\"formData.formInline.provideBusinessName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"供货市场：\">\n        <el-input v-model=\"formData.formInline.provideMarketName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"商品名称：\">\n        <el-input v-model=\"formData.formInline.goodsName\" placeholder=\"输入搜索关键词\" />\n      </el-form-item>\n      <el-form-item class=\"el-form-item\" label=\"配货时间：\">\n        <el-date-picker\n          v-model=\"formData.formInline.allocateTime\"\n          format=\"yyyy-MM-dd\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n        />\n      </el-form-item>\n      <el-form-item class=\"button-group\">\n        <el-button type=\"primary\" class=\"search-btn\" @click=\"onSearch\">搜索</el-button>\n        <el-button type=\"primary\" class=\"reset-btn\" @click=\"onReset\">重置</el-button>\n        <el-button type=\"primary\" class=\"export-btn\" @click=\"onExport\">导出</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table v-loading=\"listLoading\" :data=\"recordsList\" border fit highlight-current-row style=\"width: 100%\">\n      <el-table-column label=\"配货时间\">\n        <template slot-scope=\"scope\">\n          <span style=\"font-size: 15px; color: #999999;\">{{ scope.row.dealTime || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"配货摊位号\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.boothNoBuyer || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"配货市场\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.proprietorNameBuyer || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"配货商户名称\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.marketNameBuyer || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"供货摊位\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.boothNo || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"供货市场\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.proprietorName || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"供货商户名称\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.marketName || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品名称\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.goodsName || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"采购量\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.goodsWeight + scope.row.unit || \"暂无\" }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      style=\"margin-top: 20px;\"\n      :current-page=\"formData.page\"\n      :page-sizes=\"[10, 20, 50, 100]\"\n      :page-size=\"formData.limit\"\n      :total=\"total\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      @size-change=\"sizeChangeHandle\"\n      @current-change=\"currentChangeHandle\"\n    />\n  </div>\n</template>\n\n<script>\nimport { getAllocateGoodsManagementListAPI } from '@/api/allocateGoodsManagement'\nimport dayjs from 'dayjs'\nimport XLSX from 'xlsx'\nimport FileSaver from 'file-saver'\n\nexport default {\n  name: 'ArticleList',\n  data() {\n    return {\n      total: 0,\n      listLoading: true,\n      // 请求参数\n      formData: {\n        page: 1,\n        limit: 10,\n        formInline: {\n          // 配货摊位号\n          allocateStallNo: '',\n          // 配货商户名称\n          allocateBusinessName: '',\n          // 配货市场\n          allocateMarketName: '',\n          // 供货摊位号\n          provideStallNo: '',\n          // 供货商户名称\n          provideBusinessName: '',\n          // 供货市场\n          provideMarketName: '',\n          // 商品名称\n          goodsName: '',\n          // 配货时间\n          allocateTime: null\n        }\n      },\n\n      // 请求得到的配货列表\n      recordsList: [],\n      // 导出Excel表格的数据\n      exportDataList: []\n    }\n  },\n  created() {\n    this.getAllocateGoodsManagementList()\n  },\n  methods: {\n    getAllocateGoodsManagementList() {\n      this.listLoading = true\n      let dealTimeStart = ''\n      let dealTimeEnd = ''\n      if (this.formData.formInline.allocateTime && this.formData.formInline.allocateTime.length === 2) {\n        const [startDate, endDate] = this.formData.formInline.allocateTime\n        dealTimeStart = dayjs(startDate).format('YYYY-MM-DD')\n        dealTimeEnd = dayjs(endDate).format('YYYY-MM-DD')\n      }\n      const params = {\n        limit: this.formData.limit,\n        page: this.formData.page,\n        boothNo: this.formData.formInline.provideStallNo,\n        boothNoBuyer: this.formData.formInline.allocateStallNo,\n        dealTimeStart,\n        dealTimeEnd,\n        goodsName: this.formData.formInline.goodsName,\n        marketName: this.formData.formInline.provideBusinessName,\n        marketNameBuyer: this.formData.formInline.allocateBusinessName,\n        proprietorName: this.formData.formInline.provideMarketName,\n        proprietorNameBuyer: this.formData.formInline.allocateMarketName\n      }\n      getAllocateGoodsManagementListAPI(params).then(res => {\n        this.recordsList = res.data\n        this.total = Number(res.count)\n        this.listLoading = false\n      })\n    },\n    sizeChangeHandle(val) {\n      this.formData.limit = val\n      this.formData.page = 1\n      this.getAllocateGoodsManagementList()\n    },\n    currentChangeHandle(val) {\n      this.formData.page = val\n      this.getAllocateGoodsManagementList()\n    },\n    onSearch() {\n      this.getAllocateGoodsManagementList()\n    },\n    onReset() {\n      this.formData.formInline.allocateStallNo = ''\n      this.formData.formInline.allocateBusinessName = ''\n      this.formData.formInline.allocateMarketName = ''\n      this.formData.formInline.provideStallNo = ''\n      this.formData.formInline.provideBusinessName = ''\n      this.formData.formInline.provideMarketName = ''\n      this.formData.formInline.goodsName = ''\n      this.formData.formInline.allocateTime = null\n      this.getAllocateGoodsManagementList()\n    },\n    onExport() {\n      const params = {\n        limit: 999999,\n        page: 1,\n        boothNo: '',\n        boothNoBuyer: '',\n        dealTimeStart: '',\n        dealTimeEnd: '',\n        goodsName: '',\n        marketName: '',\n        marketNameBuyer: '',\n        proprietorName: '',\n        proprietorNameBuyer: ''\n      }\n      getAllocateGoodsManagementListAPI(params).then(res => {\n        if (res.code === 0 && res.data) {\n          console.log(res.data)\n          const exportData = res.data.map(item => {\n            return {\n              '配货时间': item.dealTime,\n              '配货摊位': item.boothNoBuyer,\n              '配货市场': item.proprietorNameBuyer,\n              '配货商户名称': item.marketNameBuyer,\n              '供货摊位': item.boothNo,\n              '供货市场': item.proprietorName,\n              '供货商户名称': item.marketName,\n              '商品名称': item.goodsName,\n              '采购量': item.goodsWeight + item.unit\n            }\n          })\n          this.generateExcel(exportData)\n        } else {\n          this.$message.error('导出失败')\n        }\n      })\n    },\n    generateExcel(exportData) {\n      const wb = XLSX.utils.book_new()\n      const ws = XLSX.utils.json_to_sheet(exportData)\n      const wscols = [{ wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }, { wch: 30 }]\n      ws['!cols'] = wscols\n      XLSX.utils.book_append_sheet(wb, ws, '配货记录导出')\n      const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'binary' })\n      const buf = new ArrayBuffer(wbout.length)\n      const view = new Uint8Array(buf)\n      for (let i = 0; i < wbout.length; i++) {\n        view[i] = wbout.charCodeAt(i) & 0xFF\n      }\n      const blob = new Blob([buf], { type: 'application/octet-stream' })\n      FileSaver.saveAs(blob, '配货记录导出.xlsx')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.edit-input {\n  padding-right: 100px;\n}\n\n.cancel-btn {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n\n.demo-form-inline {\n  width: 100%;\n\n  .el-form-item {\n    margin-right: 30px;\n\n    .el-input {\n      width: 250px;\n      margin-top: 6px;\n    }\n  }\n\n}\n\n.button-group {\n\n  .search-btn,\n  .export-btn {\n    background-color: #2f58e3;\n    border: #2f58e3;\n  }\n\n  .reset-btn {\n    background-color: #ff2727;\n    border: #ff2727;\n  }\n\n  .el-button {\n    margin-right: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n    border-radius: 2px;\n  }\n}\n</style>\n"]}]}